<%- include('includes/header') %>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<!-- sweet alert -->
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- sweet alert -->

           
            
<div class="modal fade" id="address" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">New message</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="place-order-form" action="/add-address" method="post">
            <div class="row">
                <div class="col-lg-6">
                    <div class="checkout__input">
                        <p>Fist Name<span>*</span></p>
                        <input type="text" name="firstName">
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="checkout__input">
                        <p>Last Name<span>*</span></p>
                        <input type="text" name="lastName">
                    </div>
                </div>
            </div>
            <div class="checkout__input">
                <p>Country<span>*</span></p>
                <input type="text" name="country">
            </div>
            <div class="checkout__input">
                <p>Address<span>*</span></p>
                <textarea type="text" placeholder="Street Address" name="address" class="checkout__input__add" style="    height: 160px;
                width: 40%;"></textarea>
                
            </div>
            <div class="checkout__input">
                <p>Town/City<span>*</span></p>
                <input type="text" name="town">
            </div>
            <div class="checkout__input">
                <p>State<span>*</span></p>
                <input type="text" name="state">
            </div>
            <div class="checkout__input">
                <p>Postcode / ZIP<span>*</span></p>
                <input type="text" name="pinCode">
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <div class="checkout__input">
                        <p>Phone<span>*</span></p>
                        <input type="text" name="mobile">
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="checkout__input">
                        <p>Email<span>*</span></p>
                        <input type="text" name="email">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit"  class="btn btn-primary" onclick="address()">Add address</button>
              </div>
        </form>
      </div>
      
    </div>
  </div>
</div>

<div class="container rounded bg-white mt-5 mb-5">
    <div class="row">
        <div class="col-md-3 border-right">
            <div class="d-flex flex-column align-items-center text-center p-3 py-5"><img class="rounded-circle mt-5" width="150px" src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg"><span class="font-weight-bold"><%=Name.name%></span><span class="text-black-50"><%=Name.email%></span><span>Refferal code : <label style="color: rgb(223, 48, 48);" for="refferal"><%=Name.refferralCode%></label> </span></div>
        </div>
        <div class="col-md-4">
            <div class="p-3 py-5">
                <div class="row d-flex justify-content-between align-items-center experience"><div class="col-12 col-md-6  "><a ><i class="fa fa-plus"></i>&nbsp;<button type="button" class=" " style="border: none;"  data-toggle="modal" data-target="#address" data-whatever="@mdo">Add new address</button></a></div>
            <div class="col-12 col-md-6  "><a href="/select-address?id=1313" style="border: none;" ><i class="fa fa-plus"></i>&nbsp;change Address</a></div></div><br>
                <%if(defaultAddress.length < 1){%>
                    <%}else{%>
                <div class="row">
                <h6>Default address</h6>
                <hr>
                <div class="col-md-12">Name <span class="ms-3" style="color: rgb(207, 4, 4);"><%=defaultAddress[0].userAddress.firstName%>&nbsp;&nbsp;<%=defaultAddress[0].userAddress.lastName%></span></div> <br>
                <div class="col-md-12">Country <span class="ms-3" style="color: rgb(207, 4, 4);"><%=defaultAddress[0].userAddress.country%></span></div> <br>
                <div class="col-md-12">House<span class="ms-3" style="color: rgb(207, 4, 4);"> <%=defaultAddress[0].userAddress.address%></span></div> <br>
                <div class="col-md-12">Town<span class="ms-3" style="color: rgb(207, 4, 4);"><%=defaultAddress[0].userAddress.town%></span></div> <br>
                <div class="col-md-12">State<span class="ms-3" style="color: rgb(207, 4, 4);"><%=defaultAddress[0].userAddress. state%></span></div> <br>
                <div class="col-md-12">Pin code<span class="ms-3" style="color: rgb(207, 4, 4);"><%=defaultAddress[0].userAddress. pinCode%></span></div> <br>
                <div class="col-md-12">Mob<span class="ms-3" style="color: rgb(207, 4, 4);"><%=defaultAddress[0].userAddress. mobile%></span></div> <br>
                <div class="col-md-12">Email<span class="ms-3" style="color: rgb(207, 4, 4);"><%=defaultAddress[0].userAddress. email%></span></div> <br>
                </div>
               <%}%>
            </div>
        </div>
        <div class="col-md-4" >
           
            <div class="p-3 py-5"> 
                <form action="" id="changePassword">  
                <div class="d-flex justify-content-between align-items-center experience "><span></span><span ><a class="btn"  onclick="changePassword()"><i class="fa fa-plus"></i>&nbsp;Change password</a></span></div><br>
                <div class="col-md-12 change" id="change1" style="visibility: hidden;"><label class="labels">Enter old password</label><input type="text" name="oldPassword" class="form-control" placeholder="Enter old password" value=""></div> <br>
                <div class="col-md-12 change" id="change2" style="visibility: hidden;"><label class="labels">Enter new password</label><input type="text" name="newPassword" class="form-control" placeholder="Enter new password" value=""></div>
                <div class="col-md-12 change" id="change3" style="visibility: hidden;"><a onclick="change()" class="btn">confirm</a></div>
            </form>
            </div>
            <div class="wrapper" id="popup">
                <!-- Popup Start -->
                <div class="popup">
                  <div class="popup-content">
                    <span>Available Coupens</span>
                      <ul class="social-icons-footer">
                        <%for(let i = 0 ; i < all_coupens.length ; i++){%>

                            <%if(all_coupens[i].userID.userID == Name._id){%>
                                
                                <%}else{%>
                                    <li style="background: radial-gradient( #e29498, #cb2027);">
                                        <img src="/img/coupon (1).png" style="width:20px;" alt=""></a> <%=all_coupens[i].coupenName%></li>
                                    <%}%>
                        
                        <%}%>
                      </ul>
                  </div>
                  <a class="button_popup" id="myBtn"></a>
                </div>
                <!-- Popup End -->
                </div>
        </div>

<script src="https://use.fontawesome.com/6dd87bbb9d.js"></script>


        <script>
            function changePassword(){
                document.getElementById('change1').style.visibility = "visible"
                document.getElementById('change2').style.visibility = "visible"
                document.getElementById('change3').style.visibility = "visible"
            }
            function change(){
                $.ajax({
                    url : '/change-password',
                    method : 'post',
                    data : $('#changePassword').serialize(),
                    success : (response) => {
                        if(response.status == false){
                            Swal.fire({
                            icon: 'error',
                            title: 'Oops...',
                            text: 'the old password is wrong......!',
                            })
                        }else if(response.status == true){
                            Swal.fire({
                            icon: 'success',
                            title: 'passwod changed successfully',
                        })
                        }
                    }
                })
            }
        </script>
        
    </div>
</div>
</div>
</div>
    <style>
    
    
    .form-control:focus {
        box-shadow: none;
        border-color:#e6373a
    }
    
    .profile-button {
        background: #e6373a;
        box-shadow: none;
        border: none
    }
    
    .profile-button:hover {
        background: #e6373a
    }
    
    .profile-button:focus {
        background: #e6373a;
        box-shadow: none
    }
    
    .profile-button:active {
        background: #e6373a;
        box-shadow: none
    }
    
    .back:hover {
        color: #e6373a;
        cursor: pointer
    }
    
    .labels {
        font-size: 11px
    }
    
    .add-experience:hover {
        background: #e6373a;
        color: #fff;
        cursor: pointer;
        border: solid 1px #e6373a
    }
   
        body {
        font-family: 'Roboto', sans-serif;
        font-size: 18px;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        color: #111;
        background: #fff;
    }
    .wrapper {
        height: 25vh;
    }
    a {
        -webkit-transition: color 110ms ease-in-out;
        -o-transition: color 110ms ease-in-out;
        transition: color 110ms ease-in-out;
        text-decoration: none;
        color: #00a4ea;
    }
    
    /* Popup */
    .popup-content span {
      border-bottom: 1px solid #111;
      font-size: 18px;
      line-height: 1.1;
      margin: 10px 0;
      display: inline-block;
      font-weight: bold;
    }
    
    .popup {
    right: 0;
      position: fixed;
      bottom: 0;
      transition: right 0.5s ease;
    }
    .popup-content {
      background-color: white;
      box-shadow: 5px 2px 15px black;
      box-sizing: border-box;
      color: #111;
      float: left;
      height: 100%;
      padding: 1em;
      width: 250px;
    }
    
    .close {
      right: -250px;
    }
    
    .button_popup {
      background-color: #ff6900;
      border-bottom-left-radius: 10px;
      border-top-left-radius: 10px;
      box-shadow: 5px 2px 15px black;
      position: absolute;
      bottom: 0;
      right: 250px;
      height: 50px;
      padding-top: 1.5em;
      width: 25px;
    }
    .button_popup::after {
      content: "\25b6";
      color: white;
      cursor: pointer;
      font-size: 1.2em;
      padding: 5px;
    }
    .button-closed::after {
      content: "\25c0";
      color: white;
      cursor: pointer;
      font-size: 1.2em;
      
    }
    .social-icons-footer {
        padding: 0;
        list-style: none;
        text-align: right;
        margin: 0;
    }
    .social-icons-footer li {
        display: block;
        margin-bottom: 8px;
        padding: 8px;
    }
    .social-icons-footer li a {
        color: white;
        font-size: 16px;
        display: block;
        -webkit-transition: all ease-in-out 150ms;
        -o-transition: all ease-in-out 150ms;
        transition: all ease-in-out 150ms;
        text-align: left;
       
    }
    .social-link-footer .fa {
        font-size: 20px;
    }
    .error{
        color:  red;
        font-size: 12px;
    }
    
    </style>
    
    <script>
        let mybutton = document.getElementById("myBtn");
        let popup = document.getElementById("popup")
        window.onscroll = function() {scrollFunction()};
        function scrollFunction() {
  if (document.body.scrollTop > 5 || document.documentElement.scrollTop > 5) {
    mybutton.style.display = "none";
    popup.style.display = "none";
  } else {
    mybutton.style.display = "block";
    popup.style.display = "block";
  }
}



        $(".button_popup").on("click", function (e) {
      $(".popup").toggleClass("close");
      $(".button_popup").toggleClass("button-closed");
      e.preventDefault();
    });
    
    </script>
    <!-- Search End -->
    <%- include('includes/footer') %>